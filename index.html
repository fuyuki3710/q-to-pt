<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>級数・DTPポイント換算</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    /* =========================
       基準設定
    ========================= */

    :root {
      --main-color: #111;
      --sub-color:  #888;
      --bg-color:   #ffffff;
    }

    html {
      font-size: 16px;
    }

    /* スマートフォン向け */
    @media (max-width: 480px) {
      html {
        font-size: 14px;
      }
    }

    body {
      font-family:
        "SF Compact",
        "Google Sans Code",
        system-ui, -apple-system, BlinkMacSystemFont,
        Inter,sans-serif;
      background: var(--bg-color);
      color: var(--main-color);
      padding: 3rem;
      max-width: 32rem;
      margin: auto;
    }

    /* =========================
       タイトル
    ========================= */

    h1 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 2rem;
    }

    /* =========================
       入力
    ========================= */

    .calculator {
      display: grid;
    }

    .input-row {
      display: flex;
      align-items: flex-end;
      gap: 0.75rem;
      margin-bottom: 4rem;
    }

    input {
      font-size: 1rem;
      font-weight: 300;
      padding: 0.6rem;
      flex: 1;
    }

    input[type="number"] {
      appearance: auto;
      -webkit-appearance: auto;
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      opacity: 1;
    }

    .unit {
      font-size: 1rem;
      font-weight: 300;
      color: var(--sub-color);
    }

    /* =========================
       結果行 共通
    ========================= */

    .result {
      display: grid;
    }

    .row {
      display: flex;
      align-items: flex-end;
      gap: 0.6rem;
      line-height: 1;
    }

    .label {
      font-size: 0.75rem;
      font-weight: 300;
      color: var(--sub-color);
      width: 4em;
    }

    .value {
      flex: 1;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .unit-q {
      margin-left: 0.1em;
    }

    button.copy {
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
      font-size: 0.75rem;
      font-weight: 300;
      color: var(--sub-color);
      width: 5rem;
      text-align: right;
      line-height: 1;
      align-self: flex-end;
    }

    button.copy:hover {
      text-decoration: underline;
    }

    button.copy:disabled {
      cursor: default;
      text-decoration: none;
      color: #aaa;
    }

    /* =========================
       近似値（主役）
    ========================= */

    .row.main .value {
      font-size: 2rem;
      font-weight: 300;
    }

    .row.main .unit-q {
      font-size: 1.5rem;
      font-weight: 300;
    }

    /* =========================
       計算値（補助）
    ========================= */

    .row.sub {
      margin-top: 2rem;
    }

    .row.sub .value {
      font-size: 1rem;
      font-weight: 300;
    }

    .row.sub .unit-q {
      font-size: 0.75rem;
      font-weight: 300;
    }

    /* =========================
       脚注
    ========================= */

    .footnote {
      margin-top: 3.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid #eee;
      font-size: 0.75rem;
      font-weight: 300;
      color: var(--sub-color);
      letter-spacing: 0.05em;
    }
  </style>
</head>

<body>

  <h1>級数・ＤＴＰポイント換算</h1>

  <div class="calculator">

    <!-- 入力（Q） -->
    <div class="input-row">
      <input
        type="number"
        id="inputValue"
        step="any"
        placeholder="級数を入力">
      <span class="unit">Q</span>
    </div>

    <div class="result">

      <!-- 近似値（pt） -->
      <div class="row main">
        <span class="label">近似値</span>
        <span class="value" id="value2">—</span>
        <span class="unit-q">pt</span>
        <button class="copy" onclick="copyValue('value2', this)">コピー</button>
      </div>

      <!-- 計算値（pt） -->
      <div class="row sub">
        <span class="label">計算値</span>
        <span class="value" id="value14">—</span>
        <span class="unit-q">pt</span>
        <button class="copy" onclick="copyValue('value14', this)">コピー</button>
      </div>

    </div>
  </div>

  <div class="footnote">
    ※ 1Q = 90/127pt
  </div>

  <script>
    const input   = document.getElementById("inputValue");
    const value2  = document.getElementById("value2");
    const value14 = document.getElementById("value14");

    function calculate() {
      const q = parseFloat(input.value);

      if (Number.isNaN(q)) {
        value2.textContent  = "—";
        value14.textContent = "—";
        return;
      }

      const pt = q * 90 / 127;
      value2.textContent  = (Math.floor(pt * 100) / 100).toFixed(2);      // 小数第2位で切り捨て
      value14.textContent = (Math.floor(pt * 1e14) / 1e14).toFixed(14);   // 小数第14位で切り捨て
    }

    function copyValue(id, button) {
      const text = document.getElementById(id).textContent;
      if (text === "—") return;

      navigator.clipboard.writeText(text).then(() => {
        const original = button.textContent;
        button.textContent = "コピー済み";
        button.disabled = true;

        setTimeout(() => {
          button.textContent = original;
          button.disabled = false;
        }, 800);
      });
    }

    input.addEventListener("input", calculate);
  </script>

</body>
</html>
